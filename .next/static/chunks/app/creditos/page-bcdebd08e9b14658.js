(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{1482:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},21309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(95155),s=a(12115),l=a(35695),i=a(69758),n=a(88482),o=a(88145),c=a(53999),d=a(84616),x=a(47924),m=a(1482),u=a(89578),g=a(54416),h=a(62525);function p(e){var t,a,l;let{onSubmit:i,onCancel:n,initialData:o,isEditing:c=!1,creditosAnteriores:x=[]}=e,[m,u]=(0,s.useState)({creditoCodigo:(null==o?void 0:o.creditoCodigo)||"",anoExercicio:(null==o?void 0:o.anoExercicio)||new Date().getFullYear(),valorGlobal:(null==o?void 0:o.valorGlobal)||0,natureza:(null==o?void 0:o.natureza)||"",dataLancamento:(null==o?void 0:o.dataLancamento)||new Date().toISOString().split("T")[0]}),[p,b]=(0,s.useState)((null==o?void 0:o.eixos)||[]),[f,y]=(0,s.useState)((null==o||null==(t=o.origem)?void 0:t.tipo)||"Ano vigente"),[v,j]=(0,s.useState)((null==o||null==(a=o.origem)?void 0:a.tipo)==="Ano vigente"?o.origem.descricao:"Descentraliza\xe7\xe3o de cr\xe9dito original para o ano vigente vindo de Bras\xedlia"),[N,w]=(0,s.useState)((null==o||null==(l=o.origem)?void 0:l.tipo)==="Anos anteriores"?o.origem.creditosAnteriores:[]),[C,A]=(0,s.useState)(!1),[k,E]=(0,s.useState)({}),S=()=>{w([...N,""])},D=async e=>{if(e.preventDefault(),(()=>{let e={};return m.creditoCodigo.trim()||(e.creditoCodigo="C\xf3digo do cr\xe9dito \xe9 obrigat\xf3rio"),(m.anoExercicio<2e3||m.anoExercicio>2100)&&(e.anoExercicio="Ano do exerc\xedcio deve estar entre 2000 e 2100"),m.valorGlobal<=0&&(e.valorGlobal="Valor global deve ser maior que zero"),0===p.length&&(e.eixos="Selecione pelo menos um eixo"),m.natureza.trim()||(e.natureza="Natureza \xe9 obrigat\xf3ria"),m.dataLancamento||(e.dataLancamento="Data de lan\xe7amento \xe9 obrigat\xf3ria"),"Ano vigente"===f?v.trim()||(e.origemOriginal="Descri\xe7\xe3o da origem \xe9 obrigat\xf3ria"):"Anos anteriores"===f&&(0===N.length||N.some(e=>!e.trim()))&&(e.creditosAnteriores="Selecione pelo menos um cr\xe9dito anterior v\xe1lido"),E(e),0===Object.keys(e).length})())try{A(!0);let e="Ano vigente"===f?{tipo:"Ano vigente",descricao:v}:{tipo:"Anos anteriores",creditosAnteriores:N.filter(e=>e.trim())},t={...m,eixos:p,origem:e,dataLancamento:m.dataLancamento};await i(t)}catch(e){console.error("Error submitting form:",e)}finally{A(!1)}},L=(e,t)=>{u(a=>({...a,[e]:t})),k[e]&&E(t=>({...t,[e]:""}))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:c?"Editar Cr\xe9dito":"Novo Cr\xe9dito"}),(0,r.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(g.A,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-b pb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xf3digo do Cr\xe9dito *"}),(0,r.jsx)("input",{type:"text",value:m.creditoCodigo,onChange:e=>L("creditoCodigo",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.creditoCodigo?"border-red-500":"border-gray-300"),placeholder:"Ex: 2024DC00001"}),k.creditoCodigo&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.creditoCodigo})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano do Exerc\xedcio *"}),(0,r.jsx)("input",{type:"number",value:m.anoExercicio,onChange:e=>L("anoExercicio",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.anoExercicio?"border-red-500":"border-gray-300"),min:"2000",max:"2100"}),k.anoExercicio&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.anoExercicio})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Global (R$) *"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:m.valorGlobal,onChange:e=>L("valorGlobal",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.valorGlobal?"border-red-500":"border-gray-300"),min:"0"}),k.valorGlobal&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.valorGlobal})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Lan\xe7amento *"}),(0,r.jsx)("input",{type:"date",value:m.dataLancamento,onChange:e=>L("dataLancamento",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.dataLancamento?"border-red-500":"border-gray-300"),max:new Date().toISOString().split("T")[0]}),k.dataLancamento&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.dataLancamento}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Esta data inicia o ciclo de presta\xe7\xe3o de contas a cada 4 meses"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Eixos *"}),(0,r.jsx)("div",{className:"space-y-2",children:["Valoriza\xe7\xe3o dos Profissionais de Seguran\xe7a P\xfablica (VPS)","Enfrentamento \xe0 Criminalidade Violenta (ECV)","Fortalecimento das Institui\xe7\xf5es de Seguran\xe7a P\xfablica e Defesa Social (FISPDS)","Redu\xe7\xe3o de Mortes Violentas Intencionais e combate ao crime organizado (RMVI)","Enfrentamento \xe0 Viol\xeancia contra a Mulher (EVM)","Melhoria da Qualidade de Vida dos Profissionais de Seguran\xe7a P\xfablica (MQV)"].map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:p.includes(e),onChange:t=>{t.target.checked?b([...p,e]):b(p.filter(t=>t!==e)),k.eixos&&E(e=>({...e,eixos:""}))},className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))}),k.eixos&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.eixos}),p.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Eixos selecionados:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:p.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.split("(")[0].trim(),(0,r.jsx)("button",{type:"button",onClick:()=>{b(p.filter(t=>t!==e))},className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},e))})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Natureza *"}),(0,r.jsx)("input",{type:"text",value:m.natureza,onChange:e=>L("natureza",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.natureza?"border-red-500":"border-gray-300"),placeholder:"Ex: I-449000"}),k.natureza&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.natureza})]})]}),(0,r.jsxs)("div",{className:"border-b pb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Origem do Cr\xe9dito"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Origem *"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"Ano vigente",checked:"Ano vigente"===f,onChange:e=>y(e.target.value),className:"mr-2"}),"Ano vigente"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"Anos anteriores",checked:"Anos anteriores"===f,onChange:e=>y(e.target.value),className:"mr-2"}),"Anos anteriores"]})]})]}),"Ano vigente"===f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o da Origem *"}),(0,r.jsx)("textarea",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(k.origemOriginal?"border-red-500":"border-gray-300"),placeholder:"Descreva a origem do cr\xe9dito (ex: descentraliza\xe7\xe3o de Bras\xedlia)",rows:2}),k.origemOriginal&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.origemOriginal})]}),"Anos anteriores"===f&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cr\xe9ditos de Anos Anteriores *"}),(0,r.jsxs)("button",{type:"button",onClick:S,className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:[(0,r.jsx)(d.A,{className:"w-3 h-3"}),"Adicionar"]})]}),(0,r.jsx)("div",{className:"space-y-2",children:N.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsxs)("select",{value:e,onChange:e=>((e,t)=>{let a=[...N];a[e]=t,w(a)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Selecione um cr\xe9dito anterior"}),x.filter(e=>e.anoExercicio<m.anoExercicio).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.creditoCodigo," (",e.anoExercicio,") - ",e.valorGlobal.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]},e.id))]}),N.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>{w(N.filter((e,a)=>a!==t))},className:"p-2 text-red-600 hover:text-red-800",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})})]},t))}),0===N.length&&(0,r.jsx)("button",{type:"button",onClick:S,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-gray-400 hover:text-gray-700",children:"Clique para adicionar um cr\xe9dito anterior"}),k.creditosAnteriores&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.creditosAnteriores})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",disabled:C,children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:C,children:C?"Salvando...":c?"Salvar Altera\xe7\xf5es":"Criar Cr\xe9dito"})]})]})]})})}function b(){let e=(0,l.useRouter)(),{creditos:t,creditosWithCalculations:a,loading:g,error:h,createCredito:b}=(0,u.$)(),[f,y]=(0,s.useState)([]),[v,j]=(0,s.useState)(""),[N,w]=(0,s.useState)("todos"),[C,A]=(0,s.useState)(!1);(0,s.useEffect)(()=>{y(a)},[a]),(0,s.useEffect)(()=>{let e=a;v&&(e=e.filter(e=>e.creditoCodigo.toLowerCase().includes(v.toLowerCase())||e.eixos.some(e=>e.toLowerCase().includes(v.toLowerCase())))),"todos"!==N&&(e=e.filter(e=>e.anoExercicio.toString()===N)),y(e)},[v,N,a]);let k=[...new Set(a.map(e=>e.anoExercicio))].sort((e,t)=>t-e),E=async e=>{try{await b(e),A(!1)}catch(e){console.error("Failed to create credito:",e)}};return g?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.F,{}),(0,r.jsx)("main",{className:"w-full py-6 px-8",children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"text-gray-500",children:"Carregando cr\xe9ditos..."})})})})]}):h?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.F,{}),(0,r.jsx)("main",{className:"w-full py-6 px-8",children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsxs)("div",{className:"text-red-500",children:["Erro ao carregar cr\xe9ditos: ",h]})})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.F,{}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gest\xe3o de Cr\xe9ditos"}),(0,r.jsxs)("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"w-4 h-4"}),"Adicionar Novo Cr\xe9dito"]})]}),(0,r.jsx)(n.Zp,{className:"mb-6",children:(0,r.jsx)(n.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Pesquisar por c\xf3digo ou a\xe7\xe3o/eixo...",className:"w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:v,onChange:e=>j(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"text-gray-400 w-4 h-4"}),(0,r.jsxs)("select",{className:"border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,onChange:e=>w(e.target.value),children:[(0,r.jsx)("option",{value:"todos",children:"Todos os anos"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})]})})}),(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ano"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C\xf3digo do Cr\xe9dito"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eixos"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Global"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Empenhado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Pago"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo Dispon\xedvel"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(t=>{var a,s;let l=(t.saldoDisponivel/t.valorGlobal*100).toFixed(0),i=parseInt(l)>50?"Dispon\xedvel":parseInt(l)>20?"Aten\xe7\xe3o":"Cr\xedtico";return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>e.push("/creditos/".concat(t.id)),children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.anoExercicio}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.creditoCodigo}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:t.eixos.map((e,t)=>(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",title:e,children:e.split("(")[0].trim()},t))})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,r.jsx)(o.E,{variant:(null==(a=t.origem)?void 0:a.tipo)==="Ano vigente"?"default":"secondary",children:(null==(s=t.origem)?void 0:s.tipo)==="Ano vigente"?"Ano vigente":"Anos anteriores"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,c.vv)(t.valorGlobal)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-yellow-600",children:(0,c.vv)(t.valorEmpenhado)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:(0,c.vv)(t.valorPago)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:(0,c.vv)(t.saldoDisponivel)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)(o.E,{variant:"Dispon\xedvel"===i?"default":"Aten\xe7\xe3o"===i?"secondary":"destructive",children:[l,"% - ",i]})})]},t.id)})})]})}),0===f.length&&!g&&(0,r.jsx)("div",{className:"bg-white shadow rounded-md p-8 text-center",children:(0,r.jsx)("div",{className:"text-gray-500",children:0===a.length?"Nenhum cr\xe9dito encontrado. Adicione o primeiro cr\xe9dito!":"Nenhum cr\xe9dito corresponde aos filtros aplicados."})})]})}),C&&(0,r.jsx)(p,{onSubmit:E,onCancel:()=>A(!1),creditosAnteriores:Object.values(t)})]})}},33667:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(12115),s=a(80314),l=a(16203);function i(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[n,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,l.hg)(s.j,e=>{t(e),i(!1)},e=>{o(e.message),i(!1)});return()=>e()},[]),{user:e,loading:a,error:n,logout:(0,r.useCallback)(async()=>{try{o(null),await (0,l.CI)(s.j),window.location.href="/login"}catch(e){throw o(e instanceof Error?e.message:"Failed to logout"),e}},[]),clearError:(0,r.useCallback)(()=>{o(null)},[]),isAuthenticated:!!e}}},48819:(e,t,a)=>{Promise.resolve().then(a.bind(a,21309))},53999:(e,t,a)=>{"use strict";a.d(t,{Yq:()=>n,cn:()=>l,qY:()=>o,vv:()=>i});var r=a(52596),s=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function n(e){return e?new Date(e).toLocaleDateString("pt-BR"):"-"}function o(e){return({Planejado:"bg-gray-100 text-gray-800",Empenhado:"bg-blue-100 text-blue-800",Liquidado:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Cancelado:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800"}},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69758:(e,t,a)=>{"use strict";a.d(t,{F:()=>p});var r=a(95155),s=a(6874),l=a.n(s),i=a(35695),n=a(53999),o=a(33667),c=a(57340),d=a(55868),x=a(47924),m=a(72713),u=a(381),g=a(34835);let h=[{href:"/",label:"Dashboard",icon:c.A},{href:"/creditos",label:"Cr\xe9ditos",icon:d.A},{href:"/rastreamento",label:"Rastreamento",icon:x.A},{href:"/relatorios",label:"Relat\xf3rios",icon:m.A},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:u.A}];function p(){let e=(0,i.usePathname)(),{logout:t,loading:a}=(0,o.A)(),s=async()=>{if(!a)try{await t()}catch(e){console.error("Logout failed:",e)}};return(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SICOF - CBMERJ"})}),(0,r.jsx)("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-8",children:h.map(t=>{let a=t.icon,s=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(l(),{href:t.href,className:(0,n.cn)("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",s?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,r.jsx)(a,{className:"w-4 h-4 mr-2"}),t.label]},t.href)})})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("button",{onClick:s,disabled:a,className:"flex items-center text-gray-500 hover:text-gray-700 disabled:opacity-50",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),a?"Saindo...":"Sair"]})})]})})})}},74466:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var r=a(52596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.$,i=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return l(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:n}=t,o=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],r=null==n?void 0:n[e];if(null===t)return null;let l=s(t)||s(r);return i[e][l]}),c=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return l(e,o,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...n,...c}[t]):({...n,...c})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},84616:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88145:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(95155),s=a(53999);let l=(0,a(74466).F)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800",info:"border-transparent bg-blue-100 text-blue-800"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{className:(0,s.cn)(l({variant:a}),t),...i})}},88482:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>o,ZB:()=>n,Zp:()=>l,aR:()=>i});var r=a(95155),s=a(53999);function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("h3",{className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("p-6 pt-0",t),...a})}},89578:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(12115),s=a(32401);function l(){let[e,t]=(0,r.useState)({}),[a,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{try{n(!0),c(null);let[e,a]=await Promise.all([s.J.getAllCreditos(),s.J.getCreditosWithCalculations()]);t(e),l(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch credits")}finally{n(!1)}},[]),x=(0,r.useCallback)(async e=>{try{c(null);let t=await s.J.createCredito(e);return await d(),t}catch(e){throw c(e instanceof Error?e.message:"Failed to create credit"),e}},[d]),m=(0,r.useCallback)(async(e,t)=>{try{c(null),await s.J.updateCredito(e,t),await d()}catch(e){throw c(e instanceof Error?e.message:"Failed to update credit"),e}},[d]),u=(0,r.useCallback)(async e=>{try{c(null),await s.J.deleteCredito(e),await d()}catch(e){throw c(e instanceof Error?e.message:"Failed to delete credit"),e}},[d]),g=(0,r.useCallback)(()=>a.filter(e=>e.saldoDisponivel>0),[a]);return(0,r.useEffect)(()=>{d()},[d]),{creditos:e,creditosWithCalculations:a,creditosDisponiveis:g(),loading:i,error:o,refetch:d,createCredito:x,updateCredito:m,deleteCredito:u}}}},e=>{e.O(0,[507,811,814,959,401,441,964,358],()=>e(e.s=48819)),_N_E=e.O()}]);