(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{1482:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},32401:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var s=a(80314),o=a(81115);class r extends Error{constructor(e,t){super(e),this.cause=t,this.name="FirebaseServiceError"}}class c{static getInstance(){return c.instance||(c.instance=new c),c.instance}async getAllCreditos(){try{let e=(0,o.KR)(s.O,"creditos"),t=await (0,o.Jt)(e);return t.exists()?t.val():{}}catch(e){throw new r("Failed to fetch credits",e)}}async getCreditoById(e){try{let t=(0,o.KR)(s.O,"creditos/".concat(e)),a=await (0,o.Jt)(t);return a.exists()?a.val():null}catch(t){throw new r("Failed to fetch credit ".concat(e),t)}}async createCredito(e){try{let t=(0,o.KR)(s.O,"creditos"),a=(0,o.VC)(t),r=a.key,c={...e,id:r,despesas:{}};return await (0,o.hZ)(a,c),r}catch(e){throw new r("Failed to create credit",e)}}async updateCredito(e,t){try{let a=(0,o.KR)(s.O,"creditos/".concat(e));await (0,o.yo)(a,t)}catch(t){throw new r("Failed to update credit ".concat(e),t)}}async deleteCredito(e){try{let t=(0,o.KR)(s.O,"creditos/".concat(e));await (0,o.TF)(t)}catch(t){throw new r("Failed to delete credit ".concat(e),t)}}async createDespesa(e,t){try{let a=(0,o.KR)(s.O,"creditos/".concat(e,"/despesas")),r=(0,o.VC)(a),c=r.key,l={...t,id:c};return await (0,o.hZ)(r,l),await this.updateCreditoSaldo(e),c}catch(t){throw new r("Failed to create expense for credit ".concat(e),t)}}async updateDespesa(e,t,a){try{let r=(0,o.KR)(s.O,"creditos/".concat(e,"/despesas/").concat(t));await (0,o.yo)(r,a),await this.updateCreditoSaldo(e)}catch(e){throw new r("Failed to update expense ".concat(t),e)}}async deleteDespesa(e,t){try{let a=(0,o.KR)(s.O,"creditos/".concat(e,"/despesas/").concat(t));await (0,o.TF)(a),await this.updateCreditoSaldo(e)}catch(e){throw new r("Failed to delete expense ".concat(t),e)}}async updateCreditoSaldo(e){try{let t=await this.getCreditoById(e);if(!t)return;let a=Object.values(t.despesas||{}).filter(e=>"Pago"===e.status).reduce((e,t)=>e+t.valorTotal,0),s=t.valorGlobal-a;await this.updateCredito(e,{saldoAtual:s})}catch(t){throw new r("Failed to update credit balance for ".concat(e),t)}}async getMetasAcoes(){try{let e=(0,o.KR)(s.O,"metasAcoes"),t=await (0,o.Jt)(e);return t.exists()?t.val():{}}catch(e){throw new r("Failed to fetch metas and actions",e)}}async createMetaAcao(e,t){try{let a=(0,o.KR)(s.O,"metasAcoes/".concat(e));await (0,o.hZ)(a,{descricao:t})}catch(t){throw new r("Failed to create meta/action ".concat(e),t)}}async initializeWithMockData(e){try{let t=(0,o.KR)(s.O);await (0,o.hZ)(t,e)}catch(e){throw new r("Failed to initialize with mock data",e)}}async exportData(){try{let e=(0,o.KR)(s.O),t=await (0,o.Jt)(e);return t.exists()?t.val():{creditos:{},metasAcoes:{},fechamentosAnuais:{}}}catch(e){throw new r("Failed to export data",e)}}async checkConnection(){try{let e=(0,o.KR)(s.O,".info/connected"),t=await (0,o.Jt)(e);return t.exists()&&!0===t.val()}catch(e){return!1}}constructor(){}}let l=c.getInstance()},47946:(e,t,a)=>{Promise.resolve().then(a.bind(a,72438))},53999:(e,t,a)=>{"use strict";a.d(t,{Pt:()=>d,Yq:()=>l,cn:()=>r,qY:()=>i,vv:()=>c});var s=a(52596),o=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,s.$)(t))}function c(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function l(e){return e?new Date(e).toLocaleDateString("pt-BR"):"-"}function i(e){return({Planejado:"bg-gray-100 text-gray-800",Empenhado:"bg-blue-100 text-blue-800",Liquidado:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Cancelado:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800"}function d(e){return Object.values(e).reduce((e,t)=>"Pago"===t.status?e+(t.valorTotal||0):e,0)}},57434:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},72438:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),o=a(12115),r=a(88482),c=a(89578),l=a(53999),i=a(1482),d=a(57434),n=a(91788);function u(){let{creditos:e}=(0,c.$)(),[t,a]=(0,o.useState)(!1),[u,p]=(0,o.useState)(""),[m,h]=(0,o.useState)({type:"execucao",startDate:"",endDate:""}),[x,g]=(0,o.useState)({showFilters:!1,period:"all"}),b=async(e,t)=>{a(!0),p("");try{let a;switch(e){case 1:a=v();break;case 2:a=f();break;case 3:a=j();break;case 4:a=w();break;default:throw Error("Tipo de relat\xf3rio n\xe3o encontrado")}N(a,"".concat(t.replace(/\s+/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".csv")),p("Relat\xf3rio baixado com sucesso!")}catch(e){p("Erro ao gerar relat\xf3rio.")}finally{a(!1)}},y=async e=>{if(e.preventDefault(),!m.startDate||!m.endDate)return void p("Por favor, selecione as datas de in\xedcio e fim.");a(!0),p("");try{let e;switch(m.type){case"execucao":e=v(m.startDate,m.endDate);break;case"despesas":e=C(m.startDate,m.endDate);break;case"creditos":e=f();break;case"prestacao":e=w(m.startDate,m.endDate);break;default:throw Error("Tipo de relat\xf3rio inv\xe1lido")}N(e,"".concat({execucao:"Execucao_Orcamentaria",despesas:"Despesas_por_Periodo",creditos:"Creditos_por_Status",prestacao:"Prestacao_de_Contas"}[m.type],"_").concat(m.startDate,"_").concat(m.endDate,".csv")),p("Relat\xf3rio personalizado gerado com sucesso!")}catch(e){p("Erro ao gerar relat\xf3rio personalizado.")}finally{a(!1)}},v=(t,a)=>Object.values(e).map(e=>({"C\xf3digo do Cr\xe9dito":e.creditoCodigo,Ano:e.anoExercicio,"A\xe7\xe3o/Eixo":e.acaoEixo,"Valor Global":(0,l.vv)(e.valorGlobal),"Valor Gasto":(0,l.vv)((0,l.Pt)(e.despesas||{})),"Saldo Atual":(0,l.vv)(e.saldoAtual),"Percentual Executado":"".concat(((0,l.Pt)(e.despesas||{})/e.valorGlobal*100).toFixed(2),"%")})),f=()=>Object.entries(Object.values(e).reduce((e,t)=>{let a=t.acaoEixo;return e[a]||(e[a]={totalCreditos:0,valorTotal:0,valorGasto:0}),e[a].totalCreditos++,e[a].valorTotal+=t.valorGlobal,e[a].valorGasto+=(0,l.Pt)(t.despesas||{}),e},{})).map(e=>{let[t,a]=e;return{"A\xe7\xe3o/Eixo":t,"Total de Cr\xe9ditos":a.totalCreditos,"Valor Total":(0,l.vv)(a.valorTotal),"Valor Gasto":(0,l.vv)(a.valorGasto),"Saldo Dispon\xedvel":(0,l.vv)(a.valorTotal-a.valorGasto)}}),j=()=>{let t=[];return Object.values(e).forEach(e=>{Object.values(e.despesas||{}).forEach(a=>{("Liquidado"===a.status||"Pago"===a.status)&&t.push({"C\xf3digo do Cr\xe9dito":e.creditoCodigo,"Processo SEI":a.processoSEI,Objeto:a.objeto,"Valor Total":(0,l.vv)(a.valorTotal),Status:a.status,"Data de Empenho":a.dataEmpenho||"-","Nota de Empenho":a.notaEmpenho||"-","Data de Pagamento":a.dataPagamento||"-"})})}),t},w=(t,a)=>Object.values(e).map(e=>{let t=Object.values(e.despesas||{}),a=t.length,s=t.filter(e=>e.dataPrestacaoContas).length;return{"C\xf3digo do Cr\xe9dito":e.creditoCodigo,"A\xe7\xe3o/Eixo":e.acaoEixo,"Total de Despesas":a,"Despesas com Presta\xe7\xe3o":s,"Percentual de Compliance":a>0?"".concat((s/a*100).toFixed(2),"%"):"0%",Status:s===a?"Completo":"Pendente"}}),C=(t,a)=>{let s=[];return Object.values(e).forEach(e=>{Object.values(e.despesas||{}).forEach(o=>{let r=o.dataEmpenho;r&&r>=t&&r<=a&&s.push({"C\xf3digo do Cr\xe9dito":e.creditoCodigo,"Data de Empenho":o.dataEmpenho,"Processo SEI":o.processoSEI,Objeto:o.objeto,"Valor Total":(0,l.vv)(o.valorTotal),Status:o.status})})}),s},N=(e,t)=>{if(0===e.length)throw Error("Nenhum dado encontrado para o relat\xf3rio");let a=Object.keys(e[0]),s=new Blob([[a.join(","),...e.map(e=>a.map(t=>{let a=e[t];return"string"==typeof a&&(a.includes(",")||a.includes('"'))?'"'.concat(a.replace(/"/g,'""'),'"'):a}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Relat\xf3rios"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gere e baixe relat\xf3rios do sistema"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>g(e=>({...e,showFilters:!e.showFilters})),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Filtros"]}),(0,s.jsxs)("select",{value:x.period,onChange:e=>g(t=>({...t,period:e.target.value})),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,s.jsx)("option",{value:"all",children:"Todos os per\xedodos"}),(0,s.jsx)("option",{value:"2024",children:"2024"}),(0,s.jsx)("option",{value:"2023",children:"2023"}),(0,s.jsx)("option",{value:"2022",children:"2022"})]})]})]}),u&&(0,s.jsx)("div",{className:"p-3 rounded-md text-sm ".concat(u.includes("sucesso")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:u}),x.showFilters&&(0,s.jsxs)(r.Zp,{className:"p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Filtros Avan\xe7ados"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status do Cr\xe9dito"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Dispon\xedvel"}),(0,s.jsx)("option",{children:"Aten\xe7\xe3o"}),(0,s.jsx)("option",{children:"Cr\xedtico"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\xe3o/Eixo"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"VALORIZA\xc7\xc3O DOS PROFISSIONAIS"}),(0,s.jsx)("option",{children:"MODERNIZA\xc7\xc3O DAS UNIDADES"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor M\xednimo"}),(0,s.jsx)("input",{type:"number",placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:1,titulo:"Relat\xf3rio de Execu\xe7\xe3o Or\xe7ament\xe1ria",descricao:"Demonstrativo da execu\xe7\xe3o or\xe7ament\xe1ria por per\xedodo",ultimaAtualizacao:"15/07/2025",status:"Dispon\xedvel"},{id:2,titulo:"Relat\xf3rio de Cr\xe9ditos por A\xe7\xe3o/Eixo",descricao:"Agrupamento de cr\xe9ditos por categoria de a\xe7\xe3o/eixo",ultimaAtualizacao:"12/07/2025",status:"Dispon\xedvel"},{id:3,titulo:"Relat\xf3rio de Despesas Liquidadas",descricao:"Listagem de todas as despesas liquidadas no per\xedodo",ultimaAtualizacao:"10/07/2025",status:"Dispon\xedvel"},{id:4,titulo:"Relat\xf3rio de Presta\xe7\xe3o de Contas",descricao:"Status da presta\xe7\xe3o de contas por cr\xe9dito",ultimaAtualizacao:"08/07/2025",status:"Processando"}].map(e=>(0,s.jsx)(r.Zp,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(d.A,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.titulo}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.descricao}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["\xdaltima atualiza\xe7\xe3o: ",e.ultimaAtualizacao]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Dispon\xedvel"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]})]}),(0,s.jsxs)("button",{onClick:()=>b(e.id,e.titulo),className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md ".concat("Dispon\xedvel"===e.status?"text-blue-600 bg-blue-100 hover:bg-blue-200":"text-gray-400 bg-gray-100 cursor-not-allowed"),disabled:"Dispon\xedvel"!==e.status||t,children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-1"}),t?"Gerando...":"Baixar"]})]})},e.id))}),(0,s.jsxs)(r.Zp,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gerar Relat\xf3rio Personalizado"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Relat\xf3rio"}),(0,s.jsxs)("select",{value:m.type,onChange:e=>h(t=>({...t,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"execucao",children:"Execu\xe7\xe3o Or\xe7ament\xe1ria"}),(0,s.jsx)("option",{value:"despesas",children:"Despesas por Per\xedodo"}),(0,s.jsx)("option",{value:"creditos",children:"Cr\xe9ditos por Status"}),(0,s.jsx)("option",{value:"prestacao",children:"Presta\xe7\xe3o de Contas"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data In\xedcio"}),(0,s.jsx)("input",{type:"date",value:m.startDate,onChange:e=>h(t=>({...t,startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),(0,s.jsx)("input",{type:"date",value:m.endDate,onChange:e=>h(t=>({...t,endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("button",{type:"submit",disabled:t,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-2"}),t?"Gerando...":"Gerar Relat\xf3rio"]})})]})]})]})}},80314:(e,t,a)=>{"use strict";a.d(t,{O:()=>i,j:()=>d});var s=a(23915),o=a(81115),r=a(16203),c=a(86864);let l=(0,s.Wp)({apiKey:"AIzaSyDhLLzcqgM26plgH7eL5mWms3EDeJqHpMY",authDomain:"suad-44036.firebaseapp.com",databaseURL:"https://suad-44036-default-rtdb.firebaseio.com",projectId:"suad-44036",storageBucket:"suad-44036.firebasestorage.app",messagingSenderId:"33344546339",appId:"1:33344546339:web:4de36f2ebaa4e4ea11f396",measurementId:"G-SNDT989PZE"}),i=(0,o.C3)(l),d=(0,r.xI)(l);(0,c.TT)().then(e=>{e&&(0,c.P5)(l)})},88482:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>i,ZB:()=>l,Zp:()=>r,aR:()=>c});var s=a(95155),o=a(53999);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("h3",{className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("p-6 pt-0",t),...a})}},89578:(e,t,a)=>{"use strict";a.d(t,{$:()=>r});var s=a(12115),o=a(32401);function r(){let[e,t]=(0,s.useState)({}),[a,r]=(0,s.useState)(!0),[c,l]=(0,s.useState)(null),i=(0,s.useCallback)(async()=>{try{r(!0),l(null);let e=await o.J.getAllCreditos();t(e)}catch(e){l(e instanceof Error?e.message:"Failed to fetch credits")}finally{r(!1)}},[]),d=(0,s.useCallback)(async e=>{try{l(null);let t=await o.J.createCredito(e);return await i(),t}catch(e){throw l(e instanceof Error?e.message:"Failed to create credit"),e}},[i]),n=(0,s.useCallback)(async(e,t)=>{try{l(null),await o.J.updateCredito(e,t),await i()}catch(e){throw l(e instanceof Error?e.message:"Failed to update credit"),e}},[i]),u=(0,s.useCallback)(async e=>{try{l(null),await o.J.deleteCredito(e),await i()}catch(e){throw l(e instanceof Error?e.message:"Failed to delete credit"),e}},[i]);return(0,s.useEffect)(()=>{i()},[i]),{creditos:e,loading:a,error:c,refetch:i,createCredito:d,updateCredito:n,deleteCredito:u}}},91788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}},e=>{e.O(0,[507,811,315,441,964,358],()=>e(e.s=47946)),_N_E=e.O()}]);