(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{21318:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r=a(95155),t=a(12115),l=a(69758),n=a(88482),i=a(33667),c=a(32401),o=a(19946);let d=(0,o.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m=(0,o.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),u=(0,o.A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var x=a(381);let h=(0,o.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var f=a(91788);let p=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function b(){let{user:e}=(0,i.A)(),[s,a]=(0,t.useState)(!1),[o,b]=(0,t.useState)(""),[g,y]=(0,t.useState)({name:(null==e?void 0:e.displayName)||"Administrador SICOF",email:(null==e?void 0:e.email)||"admin@cbmerj.rj.gov.br",unit:"Comando Geral"}),[j,N]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),v=async e=>{e.preventDefault(),a(!0),b("");try{await new Promise(e=>setTimeout(e,1e3)),b("Perfil atualizado com sucesso!")}catch(e){b("Erro ao atualizar perfil.")}finally{a(!1)}},w=async e=>{if(e.preventDefault(),j.newPassword!==j.confirmPassword)return void b("As senhas n\xe3o coincidem.");if(j.newPassword.length<6)return void b("A nova senha deve ter pelo menos 6 caracteres.");a(!0),b("");try{await new Promise(e=>setTimeout(e,1e3)),b("Senha alterada com sucesso!"),N({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){b("Erro ao alterar senha.")}finally{a(!1)}},k=async()=>{a(!0),b("");try{let e=await c.J.exportData(),s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="sicof-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),b("Dados exportados com sucesso!")}catch(e){b("Erro ao exportar dados.")}finally{a(!1)}},A=async e=>{var s;let r=null==(s=e.target.files)?void 0:s[0];if(r){a(!0),b("");try{let e=await r.text(),s=JSON.parse(e);await c.J.initializeWithMockData(s),b("Dados importados com sucesso!")}catch(e){b("Erro ao importar dados. Verifique o formato do arquivo.")}finally{a(!1)}}},C=async()=>{a(!0),b("");try{await c.J.checkConnection()?b("Sincroniza\xe7\xe3o realizada com sucesso!"):b("Erro de conex\xe3o. Verifique sua internet.")}catch(e){b("Erro ao sincronizar dados.")}finally{a(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(l.F,{}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Configura\xe7\xf5es"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Gerencie as configura\xe7\xf5es do sistema"}),o&&(0,r.jsx)("div",{className:"mt-2 p-3 rounded-md text-sm ".concat(o.includes("sucesso")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:o})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zp,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(d,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Perfil do Usu\xe1rio"})]}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,r.jsx)("input",{type:"text",value:g.name,onChange:e=>y(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:g.email,onChange:e=>y(s=>({...s,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),(0,r.jsxs)("select",{value:g.unit,onChange:e=>y(s=>({...s,unit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{children:"Comando Geral"}),(0,r.jsx)("option",{children:"1\xba Grupamento"}),(0,r.jsx)("option",{children:"2\xba Grupamento"}),(0,r.jsx)("option",{children:"Diretoria de Apoio Log\xedstico"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50",children:s?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]}),(0,r.jsxs)(n.Zp,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(m,{className:"w-5 h-5 text-red-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Seguran\xe7a"})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha Atual"}),(0,r.jsx)("input",{type:"password",value:j.currentPassword,onChange:e=>N(s=>({...s,currentPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Senha"}),(0,r.jsx)("input",{type:"password",value:j.newPassword,onChange:e=>N(s=>({...s,newPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Nova Senha"}),(0,r.jsx)("input",{type:"password",value:j.confirmPassword,onChange:e=>N(s=>({...s,confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"two-factor",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"two-factor",className:"ml-2 text-sm text-gray-700",children:"Ativar autentica\xe7\xe3o de dois fatores"})]}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 disabled:opacity-50",children:s?"Alterando...":"Alterar Senha"})]})]}),(0,r.jsxs)(n.Zp,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,r.jsx)(u,{className:"w-5 h-5 text-yellow-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notifica\xe7\xf5es"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Notifica\xe7\xf5es por Email"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Receber atualiza\xe7\xf5es importantes"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Alertas de Prazo"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Avisos sobre prazos pr\xf3ximos"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Relat\xf3rios Semanais"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Resumo semanal das atividades"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,r.jsxs)(n.Zp,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(x.A,{className:"w-5 h-5 text-green-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sistema"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tema da Aplica\xe7\xe3o"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{children:"Claro"}),(0,r.jsx)("option",{children:"Escuro"}),(0,r.jsx)("option",{children:"Autom\xe1tico"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idioma"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{children:"Portugu\xeas (Brasil)"}),(0,r.jsx)("option",{children:"English"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuso Hor\xe1rio"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{children:"Am\xe9rica/S\xe3o_Paulo (GMT-3)"}),(0,r.jsx)("option",{children:"America/Manaus (GMT-4)"})]})]})]})]})]}),(0,r.jsxs)(n.Zp,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,r.jsx)(h,{className:"w-5 h-5 text-purple-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Backup e Dados"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("button",{onClick:k,disabled:s,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mb-2 disabled:opacity-50",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Exportar Dados"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Baixar backup completo dos dados"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("label",{className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 mb-2 cursor-pointer",children:[(0,r.jsx)(p,{className:"w-4 h-4 mr-2"}),"Importar Dados",(0,r.jsx)("input",{type:"file",accept:".json",onChange:A,className:"hidden",disabled:s})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Restaurar dados de backup"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("button",{onClick:C,disabled:s,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 mb-2 disabled:opacity-50",children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2"}),"Sincronizar"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Sincronizar com sistema central"})]})]})]})]})})})]})}},33667:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var r=a(12115),t=a(80314),l=a(16203);function n(){let[e,s]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,l.hg)(t.j,e=>{s(e),n(!1)},e=>{c(e.message),n(!1)});return()=>e()},[]),{user:e,loading:a,error:i,logout:(0,r.useCallback)(async()=>{try{c(null),await (0,l.CI)(t.j),window.location.href="/login"}catch(e){throw c(e instanceof Error?e.message:"Failed to logout"),e}},[]),clearError:(0,r.useCallback)(()=>{c(null)},[]),isAuthenticated:!!e}}},53999:(e,s,a)=>{"use strict";a.d(s,{Yq:()=>i,cn:()=>l,qY:()=>c,vv:()=>n});var r=a(52596),t=a(39688);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.QP)((0,r.$)(s))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function i(e){return e?new Date(e).toLocaleDateString("pt-BR"):"-"}function c(e){return({Planejado:"bg-gray-100 text-gray-800",Empenhado:"bg-blue-100 text-blue-800",Liquidado:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Cancelado:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800"}},69758:(e,s,a)=>{"use strict";a.d(s,{F:()=>p});var r=a(95155),t=a(6874),l=a.n(t),n=a(35695),i=a(53999),c=a(33667),o=a(57340),d=a(55868),m=a(47924),u=a(72713),x=a(381),h=a(34835);let f=[{href:"/",label:"Dashboard",icon:o.A},{href:"/creditos",label:"Cr\xe9ditos",icon:d.A},{href:"/rastreamento",label:"Rastreamento",icon:m.A},{href:"/relatorios",label:"Relat\xf3rios",icon:u.A},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:x.A}];function p(){let e=(0,n.usePathname)(),{logout:s,loading:a}=(0,c.A)(),t=async()=>{if(!a)try{await s()}catch(e){console.error("Logout failed:",e)}};return(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SICOF - CBMERJ"})}),(0,r.jsx)("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-8",children:f.map(s=>{let a=s.icon,t=e===s.href||"/"!==s.href&&e.startsWith(s.href);return(0,r.jsxs)(l(),{href:s.href,className:(0,i.cn)("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",t?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,r.jsx)(a,{className:"w-4 h-4 mr-2"}),s.label]},s.href)})})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("button",{onClick:t,disabled:a,className:"flex items-center text-gray-500 hover:text-gray-700 disabled:opacity-50",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),a?"Saindo...":"Sair"]})})]})})})}},76440:(e,s,a)=>{Promise.resolve().then(a.bind(a,21318))},88482:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n});var r=a(95155),t=a(53999);function l(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})}function n(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("flex flex-col space-y-1.5 p-6",s),...a})}function i(e){let{className:s,...a}=e;return(0,r.jsx)("h3",{className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})}function c(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("p-6 pt-0",s),...a})}},91788:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}},e=>{e.O(0,[507,811,814,959,401,441,964,358],()=>e(e.s=76440)),_N_E=e.O()}]);