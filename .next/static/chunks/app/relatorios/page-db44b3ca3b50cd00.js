(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{1482:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},47946:(e,a,t)=>{Promise.resolve().then(t.bind(t,72438))},47969:(e,a,t)=>{"use strict";t.d(a,{G:()=>r});var s=t(12115),o=t(32401);function r(){let[e,a]=(0,s.useState)({}),[t,r]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{try{i(!0),d(null);let[e,t]=await Promise.all([o.J.getAllDespesas(),o.J.getDespesasWithCreditInfo()]);a(e),r(t)}catch(e){d(e instanceof Error?e.message:"Failed to fetch expenses")}finally{i(!1)}},[]),u=(0,s.useCallback)(async e=>{try{d(null);let a=await o.J.createDespesa(e);return await c(),a}catch(e){throw d(e instanceof Error?e.message:"Failed to create expense"),e}},[c]),m=(0,s.useCallback)(async(e,a)=>{try{d(null),await o.J.updateDespesa(e,a),await c()}catch(e){throw d(e instanceof Error?e.message:"Failed to update expense"),e}},[c]),p=(0,s.useCallback)(async e=>{try{d(null),await o.J.deleteDespesa(e),await c()}catch(e){throw d(e instanceof Error?e.message:"Failed to delete expense"),e}},[c]),x=(0,s.useCallback)(e=>t.filter(a=>a.fontesDeRecurso.some(a=>a.creditoId===e)),[t]),h=(0,s.useCallback)(e=>t.filter(a=>a.status===e),[t]),g=(0,s.useCallback)(e=>t.reduce((a,t)=>{let s=t.fontesDeRecurso.find(a=>a.creditoId===e);return a+(s?s.valorUtilizado:0)},0),[t]);return(0,s.useEffect)(()=>{c()},[c]),{despesas:e,despesasWithCredits:t,loading:l,error:n,refetch:c,createDespesa:u,updateDespesa:m,deleteDespesa:p,getDespesasByCredito:x,getDespesasByStatus:h,getTotalValueByCredito:g}}},57434:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},72438:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(95155),o=t(12115),r=t(69758),l=t(88482),i=t(89578),n=t(47969),d=t(53999),c=t(1482),u=t(57434),m=t(91788);function p(){let{creditos:e,creditosWithCalculations:a}=(0,i.$)(),{despesasWithCredits:t}=(0,n.G)(),[p,x]=(0,o.useState)(!1),[h,g]=(0,o.useState)(""),[v,b]=(0,o.useState)({type:"execucao",startDate:"",endDate:""}),[f,y]=(0,o.useState)({showFilters:!1,period:"all"}),j=async(e,a)=>{x(!0),g("");try{let t;switch(e){case 1:t=D();break;case 2:t=w();break;case 3:t=N();break;case 4:t=E();break;default:throw Error("Tipo de relat\xf3rio n\xe3o encontrado")}A(t,"".concat(a.replace(/\s+/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".csv")),g("Relat\xf3rio baixado com sucesso!")}catch(e){g("Erro ao gerar relat\xf3rio.")}finally{x(!1)}},C=async e=>{if(e.preventDefault(),!v.startDate||!v.endDate)return void g("Por favor, selecione as datas de in\xedcio e fim.");x(!0),g("");try{let e;switch(v.type){case"execucao":e=D(v.startDate,v.endDate);break;case"despesas":e=k(v.startDate,v.endDate);break;case"creditos":e=w();break;case"prestacao":e=E(v.startDate,v.endDate);break;default:throw Error("Tipo de relat\xf3rio inv\xe1lido")}A(e,"".concat({execucao:"Execucao_Orcamentaria",despesas:"Despesas_por_Periodo",creditos:"Creditos_por_Status",prestacao:"Prestacao_de_Contas"}[v.type],"_").concat(v.startDate,"_").concat(v.endDate,".csv")),g("Relat\xf3rio personalizado gerado com sucesso!")}catch(e){g("Erro ao gerar relat\xf3rio personalizado.")}finally{x(!1)}},D=(e,t)=>a.map(e=>{var a;return{"C\xf3digo do Cr\xe9dito":e.creditoCodigo,Ano:e.anoExercicio,Eixos:e.eixos.join(", "),Origem:(null==(a=e.origem)?void 0:a.tipo)==="Ano vigente"?"Ano vigente":"Anos anteriores","Valor Global":(0,d.vv)(e.valorGlobal),"Valor Empenhado":(0,d.vv)(e.valorEmpenhado),"Valor Pago":(0,d.vv)(e.valorPago),"Saldo Dispon\xedvel":(0,d.vv)(e.saldoDisponivel),"Percentual Executado":"".concat((e.valorPago/e.valorGlobal*100).toFixed(2),"%")}}),w=()=>Object.entries(a.reduce((e,a)=>{let t={totalCreditos:1/a.eixos.length,valorTotal:a.valorGlobal/a.eixos.length,valorEmpenhado:a.valorEmpenhado/a.eixos.length,valorPago:a.valorPago/a.eixos.length};return a.eixos.forEach(a=>{e[a]||(e[a]={totalCreditos:0,valorTotal:0,valorEmpenhado:0,valorPago:0}),e[a].totalCreditos+=t.totalCreditos,e[a].valorTotal+=t.valorTotal,e[a].valorEmpenhado+=t.valorEmpenhado,e[a].valorPago+=t.valorPago}),e},{})).map(e=>{let[a,t]=e;return{"A\xe7\xe3o/Eixo":a,"Total de Cr\xe9ditos":t.totalCreditos,"Valor Total":(0,d.vv)(t.valorTotal),"Valor Empenhado":(0,d.vv)(t.valorEmpenhado),"Valor Pago":(0,d.vv)(t.valorPago),"Saldo Dispon\xedvel":(0,d.vv)(t.valorTotal-t.valorPago-t.valorEmpenhado)}}),N=()=>t.filter(e=>"Liquidado"===e.status||"Pago"===e.status).map(e=>({"Cr\xe9ditos Associados":e.creditosAssociados.map(e=>e.creditoCodigo).join(", "),"Processo SEI":e.processoSEI,Objeto:e.objeto,"Valor Total":(0,d.vv)(e.valorTotal),Status:e.status,"Datas de Empenho":e.fontesDeRecurso.filter(e=>e.dataEmpenho).map(e=>e.dataEmpenho).join(", ")||"-","Notas de Empenho":e.fontesDeRecurso.filter(e=>e.notaEmpenho).map(e=>e.notaEmpenho).join(", ")||"-","Datas de Pagamento":e.fontesDeRecurso.filter(e=>e.dataPagamento).map(e=>e.dataPagamento).join(", ")||"-","Fontes de Financiamento":e.fontesDeRecurso.length>1?"M\xfaltiplas":"\xdanica"})),E=(e,s)=>a.map(e=>{let a=t.filter(a=>a.fontesDeRecurso.some(a=>a.creditoId===e.id)),s=a.length,o=a.filter(e=>e.dataPrestacaoContas).length;return{"C\xf3digo do Cr\xe9dito":e.creditoCodigo,Eixos:e.eixos.join(", "),"Total de Despesas":s,"Despesas com Presta\xe7\xe3o":o,"Percentual de Compliance":s>0?"".concat((o/s*100).toFixed(2),"%"):"0%",Status:o===s?"Completo":"Pendente"}}),k=(e,a)=>t.filter(t=>t.fontesDeRecurso.some(t=>t.dataEmpenho&&t.dataEmpenho>=e&&t.dataEmpenho<=a)).map(e=>({"Cr\xe9ditos Associados":e.creditosAssociados.map(e=>e.creditoCodigo).join(", "),"Datas de Empenho":e.fontesDeRecurso.filter(e=>e.dataEmpenho).map(e=>e.dataEmpenho).join(", "),"Processo SEI":e.processoSEI,Objeto:e.objeto,"Valor Total":(0,d.vv)(e.valorTotal),Status:e.status,Financiamento:e.fontesDeRecurso.length>1?"Composto":"\xdanico"})),A=(e,a)=>{if(0===e.length)throw Error("Nenhum dado encontrado para o relat\xf3rio");let t=Object.keys(e[0]),s=new Blob([[t.join(","),...e.map(e=>t.map(a=>{let t=e[a];return"string"==typeof t&&(t.includes(",")||t.includes('"'))?'"'.concat(t.replace(/"/g,'""'),'"'):t}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(r.F,{}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Relat\xf3rios"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gere e baixe relat\xf3rios do sistema"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>y(e=>({...e,showFilters:!e.showFilters})),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Filtros"]}),(0,s.jsxs)("select",{value:f.period,onChange:e=>y(a=>({...a,period:e.target.value})),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,s.jsx)("option",{value:"all",children:"Todos os per\xedodos"}),(0,s.jsx)("option",{value:"2024",children:"2024"}),(0,s.jsx)("option",{value:"2023",children:"2023"}),(0,s.jsx)("option",{value:"2022",children:"2022"})]})]})]}),h&&(0,s.jsx)("div",{className:"p-3 rounded-md text-sm ".concat(h.includes("sucesso")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:h}),f.showFilters&&(0,s.jsxs)(l.Zp,{className:"p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Filtros Avan\xe7ados"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status do Cr\xe9dito"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Dispon\xedvel"}),(0,s.jsx)("option",{children:"Aten\xe7\xe3o"}),(0,s.jsx)("option",{children:"Cr\xedtico"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origem do Cr\xe9dito"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{children:"Todas"}),(0,s.jsx)("option",{children:"Ano vigente"}),(0,s.jsx)("option",{children:"Anos anteriores"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor M\xednimo"}),(0,s.jsx)("input",{type:"number",placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:1,titulo:"Relat\xf3rio de Execu\xe7\xe3o Or\xe7ament\xe1ria",descricao:"Demonstrativo da execu\xe7\xe3o or\xe7ament\xe1ria por per\xedodo",ultimaAtualizacao:"15/07/2025",status:"Dispon\xedvel"},{id:2,titulo:"Relat\xf3rio de Cr\xe9ditos por A\xe7\xe3o/Eixo",descricao:"Agrupamento de cr\xe9ditos por categoria de a\xe7\xe3o/eixo",ultimaAtualizacao:"12/07/2025",status:"Dispon\xedvel"},{id:3,titulo:"Relat\xf3rio de Despesas Liquidadas",descricao:"Listagem de todas as despesas liquidadas no per\xedodo",ultimaAtualizacao:"10/07/2025",status:"Dispon\xedvel"},{id:4,titulo:"Relat\xf3rio de Presta\xe7\xe3o de Contas",descricao:"Status da presta\xe7\xe3o de contas por cr\xe9dito",ultimaAtualizacao:"08/07/2025",status:"Dispon\xedvel"}].map(e=>(0,s.jsx)(l.Zp,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(u.A,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.titulo}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.descricao}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["\xdaltima atualiza\xe7\xe3o: ",e.ultimaAtualizacao]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Dispon\xedvel"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]})]}),(0,s.jsxs)("button",{onClick:()=>j(e.id,e.titulo),className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md ".concat("Dispon\xedvel"===e.status?"text-blue-600 bg-blue-100 hover:bg-blue-200":"text-gray-400 bg-gray-100 cursor-not-allowed"),disabled:"Dispon\xedvel"!==e.status||p,children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-1"}),p?"Gerando...":"Baixar"]})]})},e.id))}),(0,s.jsxs)(l.Zp,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gerar Relat\xf3rio Personalizado"}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Relat\xf3rio"}),(0,s.jsxs)("select",{value:v.type,onChange:e=>b(a=>({...a,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"execucao",children:"Execu\xe7\xe3o Or\xe7ament\xe1ria"}),(0,s.jsx)("option",{value:"despesas",children:"Despesas por Per\xedodo"}),(0,s.jsx)("option",{value:"creditos",children:"Cr\xe9ditos por Status"}),(0,s.jsx)("option",{value:"prestacao",children:"Presta\xe7\xe3o de Contas"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data In\xedcio"}),(0,s.jsx)("input",{type:"date",value:v.startDate,onChange:e=>b(a=>({...a,startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),(0,s.jsx)("input",{type:"date",value:v.endDate,onChange:e=>b(a=>({...a,endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("button",{type:"submit",disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),p?"Gerando...":"Gerar Relat\xf3rio"]})})]})]})]})})})]})}},88482:(e,a,t)=>{"use strict";t.d(a,{Wu:()=>n,ZB:()=>i,Zp:()=>r,aR:()=>l});var s=t(95155),o=t(53999);function r(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})}function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)("h3",{className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})}function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("p-6 pt-0",a),...t})}},89578:(e,a,t)=>{"use strict";t.d(a,{$:()=>r});var s=t(12115),o=t(32401);function r(){let[e,a]=(0,s.useState)({}),[t,r]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{try{i(!0),d(null);let[e,t]=await Promise.all([o.J.getAllCreditos(),o.J.getCreditosWithCalculations()]);a(e),r(t)}catch(e){d(e instanceof Error?e.message:"Failed to fetch credits")}finally{i(!1)}},[]),u=(0,s.useCallback)(async e=>{try{d(null);let a=await o.J.createCredito(e);return await c(),a}catch(e){throw d(e instanceof Error?e.message:"Failed to create credit"),e}},[c]),m=(0,s.useCallback)(async(e,a)=>{try{d(null),await o.J.updateCredito(e,a),await c()}catch(e){throw d(e instanceof Error?e.message:"Failed to update credit"),e}},[c]),p=(0,s.useCallback)(async e=>{try{d(null),await o.J.deleteCredito(e),await c()}catch(e){throw d(e instanceof Error?e.message:"Failed to delete credit"),e}},[c]),x=(0,s.useCallback)(()=>t.filter(e=>e.saldoDisponivel>0),[t]);return(0,s.useEffect)(()=>{c()},[c]),{creditos:e,creditosWithCalculations:t,creditosDisponiveis:x(),loading:l,error:n,refetch:c,createCredito:u,updateCredito:m,deleteCredito:p}}},91788:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}},e=>{e.O(0,[507,811,456,960,441,964,358],()=>e(e.s=47946)),_N_E=e.O()}]);