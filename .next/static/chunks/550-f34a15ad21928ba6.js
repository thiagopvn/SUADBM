"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{1482:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},32401:(e,t,a)=>{a.d(t,{J:()=>o});var r=a(80314),c=a(81115);class s extends Error{constructor(e,t){super(e),this.cause=t,this.name="FirebaseServiceError"}}class n{static getInstance(){return n.instance||(n.instance=new n),n.instance}async getAllCreditos(){try{let e=(0,c.KR)(r.O,"creditos"),t=await (0,c.Jt)(e);return t.exists()?t.val():{}}catch(e){throw new s("Failed to fetch credits",e)}}async getCreditoById(e){try{let t=(0,c.KR)(r.O,"creditos/".concat(e)),a=await (0,c.Jt)(t);return a.exists()?a.val():null}catch(t){throw new s("Failed to fetch credit ".concat(e),t)}}async createCredito(e){try{let t=(0,c.KR)(r.O,"creditos"),a=(0,c.VC)(t),s=a.key,n={...e,id:s,despesas:{}};return await (0,c.hZ)(a,n),s}catch(e){throw new s("Failed to create credit",e)}}async updateCredito(e,t){try{let a=(0,c.KR)(r.O,"creditos/".concat(e));await (0,c.yo)(a,t)}catch(t){throw new s("Failed to update credit ".concat(e),t)}}async deleteCredito(e){try{let t=(0,c.KR)(r.O,"creditos/".concat(e));await (0,c.TF)(t)}catch(t){throw new s("Failed to delete credit ".concat(e),t)}}async createDespesa(e,t){try{let a=(0,c.KR)(r.O,"creditos/".concat(e,"/despesas")),s=(0,c.VC)(a),n=s.key,o={...t,id:n};return await (0,c.hZ)(s,o),await this.updateCreditoSaldo(e),n}catch(t){throw new s("Failed to create expense for credit ".concat(e),t)}}async updateDespesa(e,t,a){try{let s=(0,c.KR)(r.O,"creditos/".concat(e,"/despesas/").concat(t));await (0,c.yo)(s,a),await this.updateCreditoSaldo(e)}catch(e){throw new s("Failed to update expense ".concat(t),e)}}async deleteDespesa(e,t){try{let a=(0,c.KR)(r.O,"creditos/".concat(e,"/despesas/").concat(t));await (0,c.TF)(a),await this.updateCreditoSaldo(e)}catch(e){throw new s("Failed to delete expense ".concat(t),e)}}async updateCreditoSaldo(e){try{let t=await this.getCreditoById(e);if(!t)return;let a=Object.values(t.despesas||{}).filter(e=>"Pago"===e.status).reduce((e,t)=>e+t.valorTotal,0),r=t.valorGlobal-a;await this.updateCredito(e,{saldoAtual:r})}catch(t){throw new s("Failed to update credit balance for ".concat(e),t)}}async getMetasAcoes(){try{let e=(0,c.KR)(r.O,"metasAcoes"),t=await (0,c.Jt)(e);return t.exists()?t.val():{}}catch(e){throw new s("Failed to fetch metas and actions",e)}}async createMetaAcao(e,t){try{let a=(0,c.KR)(r.O,"metasAcoes/".concat(e));await (0,c.hZ)(a,{descricao:t})}catch(t){throw new s("Failed to create meta/action ".concat(e),t)}}async initializeWithMockData(e){try{let t=(0,c.KR)(r.O);await (0,c.hZ)(t,e)}catch(e){throw new s("Failed to initialize with mock data",e)}}async exportData(){try{let e=(0,c.KR)(r.O),t=await (0,c.Jt)(e);return t.exists()?t.val():{creditos:{},metasAcoes:{},fechamentosAnuais:{}}}catch(e){throw new s("Failed to export data",e)}}async checkConnection(){try{let e=(0,c.KR)(r.O,".info/connected"),t=await (0,c.Jt)(e);return t.exists()&&!0===t.val()}catch(e){return!1}}constructor(){}}let o=n.getInstance()},33667:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(12115),c=a(80314),s=a(16203);function n(){let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,s.hg)(c.j,e=>{t(e),n(!1)},e=>{i(e.message),n(!1)});return()=>e()},[]),{user:e,loading:a,error:o,logout:(0,r.useCallback)(async()=>{try{i(null),await (0,s.CI)(c.j),window.location.href="/login"}catch(e){throw i(e instanceof Error?e.message:"Failed to logout"),e}},[]),clearError:(0,r.useCallback)(()=>{i(null)},[]),isAuthenticated:!!e}}},47924:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},53999:(e,t,a)=>{a.d(t,{Pt:()=>l,Yq:()=>o,cn:()=>s,qY:()=>i,vv:()=>n});var r=a(52596),c=a(39688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,r.$)(t))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function o(e){return e?new Date(e).toLocaleDateString("pt-BR"):"-"}function i(e){return({Planejado:"bg-gray-100 text-gray-800",Empenhado:"bg-blue-100 text-blue-800",Liquidado:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Cancelado:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800"}function l(e){return Object.values(e).reduce((e,t)=>"Pago"===t.status?e+(t.valorTotal||0):e,0)}},54416:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},69758:(e,t,a)=>{a.d(t,{F:()=>g});var r=a(95155),c=a(6874),s=a.n(c),n=a(35695),o=a(53999),i=a(33667),l=a(57340),d=a(55868),u=a(72713),h=a(381),f=a(34835);let y=[{href:"/",label:"Dashboard",icon:l.A},{href:"/creditos",label:"Cr\xe9ditos",icon:d.A},{href:"/relatorios",label:"Relat\xf3rios",icon:u.A},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:h.A}];function g(){let e=(0,n.usePathname)(),{logout:t,loading:a}=(0,i.A)(),c=async()=>{if(!a)try{await t()}catch(e){console.error("Logout failed:",e)}};return(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SICOF - CBMERJ"})}),(0,r.jsx)("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-8",children:y.map(t=>{let a=t.icon,c=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(s(),{href:t.href,className:(0,o.cn)("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",c?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,r.jsx)(a,{className:"w-4 h-4 mr-2"}),t.label]},t.href)})})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("button",{onClick:c,disabled:a,className:"flex items-center text-gray-500 hover:text-gray-700 disabled:opacity-50",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),a?"Saindo...":"Sair"]})})]})})})}},80314:(e,t,a)=>{a.d(t,{O:()=>i,j:()=>l});var r=a(23915),c=a(81115),s=a(16203),n=a(86864);let o=(0,r.Wp)({apiKey:"AIzaSyDhLLzcqgM26plgH7eL5mWms3EDeJqHpMY",authDomain:"suad-44036.firebaseapp.com",databaseURL:"https://suad-44036-default-rtdb.firebaseio.com",projectId:"suad-44036",storageBucket:"suad-44036.firebasestorage.app",messagingSenderId:"33344546339",appId:"1:33344546339:web:4de36f2ebaa4e4ea11f396",measurementId:"G-SNDT989PZE"}),i=(0,c.C3)(o),l=(0,s.xI)(o);(0,n.TT)().then(e=>{e&&(0,n.P5)(o)})},84616:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88145:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(95155),c=a(53999);let s=(0,a(74466).F)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800",info:"border-transparent bg-blue-100 text-blue-800"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,c.cn)(s({variant:a}),t),...n})}},88482:(e,t,a)=>{a.d(t,{Wu:()=>i,ZB:()=>o,Zp:()=>s,aR:()=>n});var r=a(95155),c=a(53999);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 p-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("h3",{className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,c.cn)("p-6 pt-0",t),...a})}},89578:(e,t,a)=>{a.d(t,{$:()=>s});var r=a(12115),c=a(32401);function s(){let[e,t]=(0,r.useState)({}),[a,s]=(0,r.useState)(!0),[n,o]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{s(!0),o(null);let e=await c.J.getAllCreditos();t(e)}catch(e){o(e instanceof Error?e.message:"Failed to fetch credits")}finally{s(!1)}},[]),l=(0,r.useCallback)(async e=>{try{o(null);let t=await c.J.createCredito(e);return await i(),t}catch(e){throw o(e instanceof Error?e.message:"Failed to create credit"),e}},[i]),d=(0,r.useCallback)(async(e,t)=>{try{o(null),await c.J.updateCredito(e,t),await i()}catch(e){throw o(e instanceof Error?e.message:"Failed to update credit"),e}},[i]),u=(0,r.useCallback)(async e=>{try{o(null),await c.J.deleteCredito(e),await i()}catch(e){throw o(e instanceof Error?e.message:"Failed to delete credit"),e}},[i]);return(0,r.useEffect)(()=>{i()},[i]),{creditos:e,loading:a,error:n,refetch:i,createCredito:l,updateCredito:d,deleteCredito:u}}}}]);