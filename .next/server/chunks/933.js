exports.id=933,exports.ids=[933],exports.modules={5883:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},26180:(a,b,c)=>{"use strict";c.d(b,{O:()=>h,j:()=>i});var d=c(67989),e=c(90555),f=c(91042);c(10178);let g=(0,d.Wp)({apiKey:"AIzaSyDhLLzcqgM26plgH7eL5mWms3EDeJqHpMY",authDomain:"suad-44036.firebaseapp.com",databaseURL:"https://suad-44036-default-rtdb.firebaseio.com",projectId:"suad-44036",storageBucket:"suad-44036.firebasestorage.app",messagingSenderId:"33344546339",appId:"1:33344546339:web:4de36f2ebaa4e4ea11f396",measurementId:"G-SNDT989PZE"}),h=(0,e.C3)(g),i=(0,f.xI)(g)},37099:()=>{},42675:()=>{},50063:(a,b,c)=>{"use strict";c.d(b,{A:()=>g});var d=c(43210),e=c(26180),f=c(91042);function g(){let[a,b]=(0,d.useState)(null),[c,g]=(0,d.useState)(!0),[h,i]=(0,d.useState)(null);return{user:a,loading:c,error:h,logout:(0,d.useCallback)(async()=>{try{i(null),await (0,f.CI)(e.j),window.location.href="/login"}catch(a){throw i(a instanceof Error?a.message:"Failed to logout"),a}},[]),clearError:(0,d.useCallback)(()=>{i(null)},[]),isAuthenticated:!!a}}},53736:(a,b,c)=>{"use strict";c.d(b,{F:()=>q});var d=c(60687),e=c(85814),f=c.n(e),g=c(16189),h=c(96241),i=c(50063),j=c(32192),k=c(23928),l=c(99270),m=c(53411),n=c(84027),o=c(40083);let p=[{href:"/",label:"Dashboard",icon:j.A},{href:"/creditos",label:"Cr\xe9ditos",icon:k.A},{href:"/rastreamento",label:"Rastreamento",icon:l.A},{href:"/relatorios",label:"Relat\xf3rios",icon:m.A},{href:"/configuracoes",label:"Configura\xe7\xf5es",icon:n.A}];function q(){let a=(0,g.usePathname)(),{logout:b,loading:c}=(0,i.A)(),e=async()=>{if(!c)try{await b()}catch(a){console.error("Logout failed:",a)}};return(0,d.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex justify-between h-16",children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,d.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"SICOF - CBMERJ"})}),(0,d.jsx)("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-8",children:p.map(b=>{let c=b.icon,e=a===b.href||"/"!==b.href&&a.startsWith(b.href);return(0,d.jsxs)(f(),{href:b.href,className:(0,h.cn)("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",e?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,d.jsx)(c,{className:"w-4 h-4 mr-2"}),b.label]},b.href)})})]}),(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsxs)("button",{onClick:e,disabled:c,className:"flex items-center text-gray-500 hover:text-gray-700 disabled:opacity-50",children:[(0,d.jsx)(o.A,{className:"w-4 h-4 mr-2"}),c?"Saindo...":"Sair"]})})]})})})}},58014:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(37413),e=c(59258),f=c.n(e);c(82704);let g={title:"SICOF - Sistema Integrado de Controle Or\xe7ament\xe1rio e Financeiro",description:"Sistema de gest\xe3o or\xe7ament\xe1ria e financeira do CBMERJ"};function h({children:a}){return(0,d.jsx)("html",{lang:"pt-BR",children:(0,d.jsx)("body",{className:f().className,children:a})})}},82704:()=>{},91811:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},93385:(a,b,c)=>{"use strict";c.d(b,{J:()=>h});var d=c(26180),e=c(90555);class f extends Error{constructor(a,b){super(a),this.cause=b,this.name="FirebaseServiceError"}}class g{constructor(){}static getInstance(){return g.instance||(g.instance=new g),g.instance}async getAllCreditos(){try{let a=(0,e.KR)(d.O,"creditos"),b=await (0,e.Jt)(a),c=b.exists()?b.val():{};return Object.values(c).forEach(a=>{a&&!a.eixos&&(a.eixos=[])}),c}catch(a){throw new f("Failed to fetch credits",a)}}async getCreditoById(a){try{let b=(0,e.KR)(d.O,`creditos/${a}`),c=await (0,e.Jt)(b);return c.exists()?c.val():null}catch(b){throw new f(`Failed to fetch credit ${a}`,b)}}async getCreditosWithCalculations(){try{let a=await this.getAllCreditos(),b=await this.getAllDespesas(),c=[];return Object.entries(a).forEach(([a,d])=>{let e=d.id,f=0,g=0;Object.values(b).forEach(a=>{(a.fontesDeRecurso||[]).forEach(a=>{a.creditoId===e&&(a.notaEmpenho&&a.dataEmpenho&&(f+=a.valorUtilizado),a.ordemBancaria&&a.dataPagamento&&(g+=a.valorUtilizado))})});let h=d.valorGlobal-(g+f);c.push({...d,eixos:d.eixos||[],valorEmpenhado:f,valorPago:g,saldoDisponivel:h})}),c}catch(a){throw new f("Failed to fetch credits with calculations",a)}}async createCredito(a){try{let b=(0,e.KR)(d.O,"creditos"),c=(0,e.VC)(b),f=c.key,g={...a,id:f};return await (0,e.hZ)(c,g),await this.gerarPrimeiraObrigacao(f,a.dataLancamento),f}catch(a){throw new f("Failed to create credit",a)}}async updateCredito(a,b){try{let c=(0,e.KR)(d.O,`creditos/${a}`);await (0,e.yo)(c,b)}catch(b){throw new f(`Failed to update credit ${a}`,b)}}async deleteCredito(a){try{let b=await this.getAllDespesas();if(Object.values(b).filter(b=>b.fontesDeRecurso.some(b=>b.creditoId===a)).length>0)throw new f("Cannot delete credit: expenses are using this credit");let c=(0,e.KR)(d.O,`creditos/${a}`);for(let b of(await (0,e.TF)(c),await this.getAllPrestacoesByCredito(a)))await this.deletePrestacaoContas(b.id)}catch(b){throw new f(`Failed to delete credit ${a}`,b)}}async getAllDespesas(){try{let a=(0,e.KR)(d.O,"despesas"),b=await (0,e.Jt)(a),c=b.exists()?b.val():{};return Object.values(c).forEach(a=>{a&&!a.fontesDeRecurso&&(a.fontesDeRecurso=[])}),c}catch(a){throw new f("Failed to fetch expenses",a)}}async getDespesaById(a){try{let b=(0,e.KR)(d.O,`despesas/${a}`),c=await (0,e.Jt)(b);return c.exists()?c.val():null}catch(b){throw new f(`Failed to fetch expense ${a}`,b)}}async createDespesa(a){try{await this.validarSaldoCreditos(a.fontesDeRecurso);let b=(0,e.KR)(d.O,"despesas"),c=(0,e.VC)(b),f=c.key,g=a.fontesDeRecurso.map(a=>({...a,id:a.id||(0,e.VC)((0,e.KR)(d.O)).key})),h={...a,id:f,fontesDeRecurso:g};return await (0,e.hZ)(c,h),f}catch(a){throw new f("Failed to create expense",a)}}async updateDespesa(a,b){try{b.fontesDeRecurso&&(await this.validarSaldoCreditos(b.fontesDeRecurso,a),b.fontesDeRecurso=b.fontesDeRecurso.map(a=>({...a,id:a.id||(0,e.VC)((0,e.KR)(d.O)).key})));let c=(0,e.KR)(d.O,`despesas/${a}`);await (0,e.yo)(c,b)}catch(b){throw new f(`Failed to update expense ${a}`,b)}}async deleteDespesa(a){try{let b=(0,e.KR)(d.O,`despesas/${a}`);await (0,e.TF)(b)}catch(b){throw new f(`Failed to delete expense ${a}`,b)}}async validarSaldoCreditos(a,b){let c=await this.getCreditosWithCalculations(),d=await this.getAllDespesas();for(let e of a){let a=c.find(a=>a.id===e.creditoId);if(!a)throw new f(`Credit ${e.creditoId} not found`);let g=a.saldoDisponivel;if(b){let a=d[b];if(a){let b=a.fontesDeRecurso.find(a=>a.creditoId===e.creditoId);b&&(g+=b.valorUtilizado)}}if(e.valorUtilizado>g)throw new f(`Insufficient balance in credit ${a.creditoCodigo}. Available: ${g}, Required: ${e.valorUtilizado}`)}}async getDashboardData(a){try{let b=await this.getAllCreditos(),c=await this.getAllDespesas(),d=0,e=0,f=0,g=0,h=Object.values(b).filter(b=>!a||b.anoExercicio===a);g=h.length,d=h.reduce((a,b)=>a+b.valorGlobal,0),Object.values(c).forEach(a=>{a.fontesDeRecurso.forEach(a=>{h.find(b=>b.id===a.creditoId)&&(a.notaEmpenho&&a.dataEmpenho&&(e+=a.valorUtilizado),a.ordemBancaria&&a.dataPagamento&&(f+=a.valorUtilizado))})});let i=d-(f+e);return{valorGlobalConsolidado:d,valorEmpenhado:e,valorLiquidadoPago:f,saldoDisponivel:i,totalCreditos:g}}catch(a){throw new f("Failed to calculate dashboard data",a)}}async getDespesasWithCreditInfo(){try{let a=await this.getAllDespesas(),b=await this.getAllCreditos();return Object.values(a).map(a=>({...a,creditosAssociados:a.fontesDeRecurso.map(a=>({creditoId:a.creditoId,creditoCodigo:b[a.creditoId]?.creditoCodigo||"N/A",valorUtilizado:a.valorUtilizado}))}))}catch(a){throw new f("Failed to fetch expenses with credit info",a)}}async getMetasAcoes(){try{let a=(0,e.KR)(d.O,"metasAcoes"),b=await (0,e.Jt)(a);return b.exists()?b.val():{}}catch(a){throw new f("Failed to fetch metas and actions",a)}}async createMetaAcao(a,b){try{let c=(0,e.KR)(d.O,`metasAcoes/${a}`);await (0,e.hZ)(c,{descricao:b})}catch(b){throw new f(`Failed to create meta/action ${a}`,b)}}async initializeWithMockData(a){try{let b=(0,e.KR)(d.O);await (0,e.hZ)(b,a)}catch(a){throw new f("Failed to initialize with mock data",a)}}async exportData(){try{let a=(0,e.KR)(d.O),b=await (0,e.Jt)(a);return b.exists()?b.val():{creditos:{},despesas:{},metasAcoes:{},fechamentosAnuais:{}}}catch(a){throw new f("Failed to export data",a)}}async checkConnection(){try{let a=(0,e.KR)(d.O,".info/connected"),b=await (0,e.Jt)(a);return b.exists()&&!0===b.val()}catch(a){return!1}}async getAllPrestacoesByCredito(a){try{let b=(0,e.KR)(d.O,"prestacoesContas"),c=await (0,e.Jt)(b);if(!c.exists())return[];let f=c.val(),g=[];return Object.entries(f).forEach(([b,c])=>{c.creditoId===a&&g.push({...c,id:b,despesasVinculadas:c.despesasVinculadas||[]})}),g.sort((a,b)=>a.prazoFinal.localeCompare(b.prazoFinal))}catch(b){throw new f(`Failed to fetch presta\xe7\xf5es for credit ${a}`,b)}}async createPrestacaoContas(a){try{let b=(0,e.KR)(d.O,"prestacoesContas"),c=(0,e.VC)(b),f=c.key,g={...a,id:f};return await (0,e.hZ)(c,g),f}catch(a){throw new f("Failed to create presta\xe7\xe3o de contas",a)}}async updatePrestacaoContas(a,b){try{let c=(0,e.KR)(d.O,`prestacoesContas/${a}`);if(await (0,e.yo)(c,b),"Entregue"===b.status){let b=await (0,e.Jt)(c);if(b.exists()){let c={...b.val(),id:a};await this.gerarProximaObrigacao(c)}}}catch(b){throw new f(`Failed to update presta\xe7\xe3o ${a}`,b)}}async deletePrestacaoContas(a){try{let b=(0,e.KR)(d.O,`prestacoesContas/${a}`);await (0,e.TF)(b)}catch(b){throw new f(`Failed to delete presta\xe7\xe3o ${a}`,b)}}async gerarPrimeiraObrigacao(a,b){try{if(!await this.getCreditoById(a))throw Error("Cr\xe9dito n\xe3o encontrado");let c=this.calcularProximoPrazo(b);await this.createPrestacaoContas({creditoId:a,ano:new Date(b).getFullYear(),periodoLabel:`1\xaa Presta\xe7\xe3o (at\xe9 ${this.formatarData(c)})`,prazoFinal:c,status:"Pendente",despesasVinculadas:[]})}catch(a){throw new f("Failed to generate first obligation",a)}}async gerarProximaObrigacao(a){try{if(!await this.getCreditoById(a.creditoId))return;let b=(await this.getAllPrestacoesByCredito(a.creditoId)).length+1,c=this.calcularProximoPrazo(a.prazoFinal);await this.createPrestacaoContas({creditoId:a.creditoId,ano:new Date(c).getFullYear(),periodoLabel:`${b}\xaa Presta\xe7\xe3o (at\xe9 ${this.formatarData(c)})`,prazoFinal:c,status:"Pendente",despesasVinculadas:[]})}catch(a){throw new f("Failed to generate next obligation",a)}}calcularProximoPrazo(a){let b=new Date(a);return b.setMonth(b.getMonth()+4),b.toISOString().split("T")[0]}formatarData(a){let[b,c,d]=a.split("-");return`${d}/${c}/${b}`}async searchDespesasByObjeto(a){try{let b=await this.getAllDespesas();return Object.values(b).filter(b=>b.objeto.toLowerCase().includes(a.toLowerCase()))}catch(a){throw new f("Failed to search expenses",a)}}async searchCreditosByCodigo(a){try{let b=await this.getAllCreditos();return Object.values(b).filter(b=>b.creditoCodigo.toLowerCase().includes(a.toLowerCase()))}catch(a){throw new f("Failed to search credits",a)}}async getDespesaDetailsWithCredits(a){try{let b=await this.getDespesaById(a);if(!b)return null;let c=await this.getAllCreditos(),d=b.fontesDeRecurso.map(a=>({fonte:a,credito:c[a.creditoId]})).filter(a=>a.credito);return{...b,fontesComCreditos:d}}catch(a){throw new f("Failed to get expense details",a)}}async getDespesasByCreditoId(a){try{let b=await this.getAllDespesas(),c=[];return Object.values(b).forEach(b=>{let d=b.fontesDeRecurso.find(b=>b.creditoId===a);d&&c.push({despesa:b,participacao:d})}),c}catch(a){throw new f("Failed to get expenses by credit",a)}}}let h=g.getInstance()},96241:(a,b,c)=>{"use strict";c.d(b,{Yq:()=>h,cn:()=>f,qY:()=>i,vv:()=>g});var d=c(49384),e=c(82348);function f(...a){return(0,e.QP)((0,d.$)(a))}function g(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}function h(a){return a?new Date(a).toLocaleDateString("pt-BR"):"-"}function i(a){return({Planejado:"bg-gray-100 text-gray-800",Empenhado:"bg-blue-100 text-blue-800",Liquidado:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Cancelado:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800"}}};